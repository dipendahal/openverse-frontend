(window.webpackJsonp=window.webpackJsonp||[]).push([[64,19],{1217:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _services,runtime=__webpack_require__(2),asyncToGenerator=__webpack_require__(35),defineProperty=__webpack_require__(6),audio_service=(__webpack_require__(75),__webpack_require__(429)),image_service=__webpack_require__(430),constants_media=__webpack_require__(41),services=(_services={},Object(defineProperty.a)(_services,constants_media.b,audio_service.a),Object(defineProperty.a)(_services,constants_media.c,image_service.a),_services);var ImageDetails_RelatedImagesvue_type_script_lang_js_={name:"RelatedImages",components:{ImageGrid:__webpack_require__(1207).default},props:{imageId:{type:String,required:!0},service:{}},setup:function setup(props){var mainImageId=Object(runtime.l)(props.imageId),relatedOptions={mediaType:constants_media.c,mediaId:mainImageId};return props.service&&(relatedOptions.service=props.service),{images:function useRelated(_ref){var mediaType=_ref.mediaType,mediaId=_ref.mediaId,_ref$service=_ref.service,service=void 0===_ref$service?services[mediaType]:_ref$service,media=Object(runtime.l)([]);return(0,Object(runtime.q)(Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee(){var response;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,service.getRelatedMedia({id:mediaId.value});case 2:response=_context.sent,media.value=response.data.results;case 4:case"end":return _context.stop()}}),_callee)})))).fetch)(),{media:media}}(relatedOptions).media}}},componentNormalizer=__webpack_require__(23),component=Object(componentNormalizer.a)(ImageDetails_RelatedImagesvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("aside",{staticClass:"m-6 md:mx-14 md:mb-14 photo_related-images",attrs:{"aria-label":_vm.$t("photo-details.aria.related")}},[_c("h3",{staticClass:"text-3xl"},[_vm._v("\n    "+_vm._s(_vm.$t("photo-details.related-images"))+"\n  ")]),_vm._v(" "),_c("ImageGrid",{attrs:{images:_vm.images,"can-load-more":!1,"fetch-state":{isFetching:_vm.$fetchState.pending,fetchingError:_vm.$fetchState.error}}})],1)}),[],!1,null,null,null);const __vuedocgen_export_0=component.exports;__webpack_exports__.default=__vuedocgen_export_0;installComponents(component,{ImageGrid:__webpack_require__(1207).default}),__vuedocgen_export_0.__docgenInfo={displayName:"RelatedImages",exportName:"default",description:"",tags:{},props:[{name:"imageId",type:{name:"string"},required:!0},{name:"service"}]}},1458:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(9),__webpack_require__(3),__webpack_require__(22),__webpack_require__(33),__webpack_require__(18),__webpack_require__(34),__webpack_require__(12),__webpack_require__(7);var asyncToGenerator=__webpack_require__(35),defineProperty=__webpack_require__(6),axios=(__webpack_require__(75),__webpack_require__(192)),axios_default=__webpack_require__.n(axios),vuex_esm=__webpack_require__(225),action_types=__webpack_require__(53),store_modules=__webpack_require__(74);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){Object(defineProperty.a)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var image_idvue_type_script_lang_js_={name:"PhotoDetailPage",layout:"with-nav-search",data:function data(){return{breadCrumbURL:"",isPrimaryImageLoaded:!1,shouldShowBreadcrumb:!1,imageWidth:0,imageHeight:0,imageType:"Unknown",thumbnailURL:"",imageId:null}},computed:_objectSpread({},Object(vuex_esm.e)(store_modules.e,["image"])),asyncData:function asyncData(_ref){return Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee(){var env,route;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return env=_ref.env,route=_ref.route,_context.abrupt("return",{thumbnailURL:"".concat(env.apiUrl,"thumbs/").concat(route.params.id),imageId:route.params.id});case 2:case"end":return _context.stop()}}),_callee)})))()},fetch:function fetch(){var _this2=this;return Object(asyncToGenerator.a)(regeneratorRuntime.mark((function _callee2(){var errorMessage;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _this2.imageId=_this2.$route.params.id,_this2.thumbnailURL="".concat("https://api.openverse.engineering/v1/","thumbs/").concat(_this2.imageId),_context2.prev=2,_context2.next=5,_this2.fetchImage({id:_this2.imageId});case 5:_context2.next=11;break;case 7:_context2.prev=7,_context2.t0=_context2.catch(2),errorMessage=_this2.$t("error.image-not-found",{id:_this2.imageId}),_this2.$nuxt.error({statusCode:404,message:errorMessage});case 11:case"end":return _context2.stop()}}),_callee2,null,[[2,7]])})))()},beforeRouteEnter:function beforeRouteEnter(to,from,nextPage){nextPage((function(_this){"/search/"!==from.path&&"/search/image"!==from.path||(_this.shouldShowBreadcrumb=!0,_this.breadCrumbURL=from.fullPath)}))},methods:_objectSpread(_objectSpread({},Object(vuex_esm.b)(store_modules.e,{fetchImage:action_types.e})),{},{onImageLoaded:function onImageLoaded(event){var _this3=this;this.imageWidth=event.target.naturalWidth,this.imageHeight=event.target.naturalHeight,this.isPrimaryImageLoaded=!0,axios_default.a.head(event.target.src).then((function(res){_this3.imageType=res.headers["content-type"]}))}})},componentNormalizer=__webpack_require__(23),component=Object(componentNormalizer.a)(image_idvue_type_script_lang_js_,(function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{attrs:{"aria-label":_vm.$t("photo-details.aria.main")}},[_c("PhotoDetails",{attrs:{image:_vm.image,thumbnail:_vm.thumbnailURL,"bread-crumb-u-r-l":_vm.breadCrumbURL,"should-show-breadcrumb":_vm.shouldShowBreadcrumb,"image-width":_vm.imageWidth,"image-height":_vm.imageHeight,"image-type":_vm.imageType},on:{onImageLoaded:_vm.onImageLoaded}}),_vm._v(" "),_c("RelatedImages",{attrs:{"image-id":_vm.imageId}})],1)}),[],!1,null,null,null);const __vuedocgen_export_0=component.exports;__webpack_exports__.default=__vuedocgen_export_0;installComponents(component,{PhotoDetails:__webpack_require__(1222).default,RelatedImages:__webpack_require__(1217).default}),__vuedocgen_export_0.__docgenInfo={displayName:"PhotoDetailPage",exportName:"default",description:"",tags:{}}}}]);